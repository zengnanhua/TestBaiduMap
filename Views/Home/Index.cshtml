<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }

        #allmap {
            height: 100%;
            width: 100%;
        }
        #l-map {
            height: 100%;
            width: 78%;
            float: left;
            border-right: 2px solid #bcbcbc;
        }

        #r-result {
            height: 100%;
            width: 20%;
            float: left;
        }
        #r-result {
            width: 100%;
        }
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=efdm8GAGDVYwhdhVpBDf8X91DexS2lxU"></script>
    <title>添加/删除地面叠加层</title>
</head>
<body>
    <div id="allmap"></div>
    @*<div id="r-result">
        <input type="button" onclick="addGroundOverlay();" value="添加" />
        <input type="button" onclick="removeGroundOverlay();" value="删除" />
    </div>*@
</body>
</html>
<script type="text/javascript">
    //var TianAnMen = new BMap.Point(116.404449, 39.914889);

    //// 创建Map实例
    //var map = new BMap.Map("allmap");

    //// 居中放大
    //map.centerAndZoom(TianAnMen, 12);

    //// 启用滚轮放大缩小
    //map.enableScrollWheelZoom();

    //// 西南角和东北角
    //var SW = new BMap.Point(116.29579, 39.837146);
    //var NE = new BMap.Point(116.475451, 39.9764);
    //groundOverlayOptions = {
    //    opacity: 1,
    //    displayOnMinLevel: 10,
    //    displayOnMaxLevel: 14
    //}
    var TianAnMen = new BMap.Point(113.853638, 22.606568);

    // 创建Map实例 { enableMapClick: false }
    var map = new BMap.Map("allmap");

    // 居中放大
    map.centerAndZoom(TianAnMen, 16);

    // 启用滚轮放大缩小
    map.enableScrollWheelZoom();
    map.addControl(new BMap.NavigationControl()); 




    // 西南角和东北角
    var SW = new BMap.Point(113.846638, 22.604000);
    var NE = new BMap.Point(113.863638, 22.614568);
    groundOverlayOptions = {
        opacity: 0.8,
        displayOnMinLevel: 5,
        displayOnMaxLevel: 50
    }
    var groundOverlay = new BMap.GroundOverlay(new BMap.Bounds(SW, NE), groundOverlayOptions);
    // 设置GroundOverlay的图片地址
      groundOverlay.setImageURL('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1554026728195&di=82bd67d05e6b89389b9ff41d375fa994&imgtype=0&src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F012af65542d0500000019ae92c8a2d.jpg');
      map.addOverlay(groundOverlay);


    // 初始化GroundOverlay
    function addMarker(point) {
        var marker = new BMap.Marker(point, { title: "dfasdf" });
     
        marker.addEventListener('click', function () { 
            alert('sdfd');
        });
        
        marker.setZIndex(999)
        map.addOverlay(marker);
        console.info(marker);
    }

    var markerList = [];
    markerList.push(new BMap.Marker(new BMap.Point(113.853638, 22.606568), { title: "dfasdf" }));
    markerList.push(new BMap.Marker(new BMap.Point(113.846638, 22.604000), { title: "dfasdf" }));
    markerList.push(new BMap.Marker(new BMap.Point(113.863638, 22.614568), { title: "dfasdf" }));

    for (var i in markerList) { 
        markerList[i].addEventListener('click', function () {
            alert('sdfd');
        });
        map.addOverlay(markerList[i]);
    }

    setTimeout(function () {
        for (var i in markerList) {
            markerList[i].Yc.parentNode.parentNode.style.zIndex = 510;
        }
     },1000)
   


    // 单击事件
    groundOverlay.addEventListener('click', function (clickEvent) {
        // console.log('clickEvent', clickEvent);
    });

    // 双击事件
    groundOverlay.addEventListener('dblclick', function (dblclickEvent) {
        // console.log('dblclickEvent', dblclickEvent);
    });

    function addGroundOverlay() {
        // 添加GroundOverlay


        // map.addOverlay(groundOverlay);
    }

    function removeGroundOverlay() {
        // 移除GroundOverlay
        map.removeOverlay(groundOverlay);
    }


    function getElementsClass(classnames) {
        var classobj = new Array();//定义数组 

        var classint = 0;//定义数组的下标 

        var tags = document.getElementsByTagName("*");//获取HTML的所有标签 

        for (var i in tags) {//对标签进行遍历 

            // if (tags[i].nodeType == 1) {//判断节点类型 

            if (tags[i].getAttribute("class") == classnames)//判断和需要CLASS名字相同的，并组成一个数组 

            {
                console.info(1);
                return tags[i];

            }

            //}

        }
    }
    setTimeout(function () {
        var v = getElementsClass(" anchorBL");
        v.innerHTML = "";
        var v = getElementsClass(" BMap_cpyCtrl BMap_noprint anchorBL");
        v.innerHTML = "";
    }, 1000)
    
</script>

